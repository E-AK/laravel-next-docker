server {
    listen 80 default_server http2;
    server_name "$DOMAIN" *."$DOMAIN";
    server_tokens off;

    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-XSS-Protection "1; mode=block";
    add_header X-Content-Type-Options "nosniff";

    location /server_status {
        stub_status on;
        access_log   off;
    }

    location / {
        proxy_pass http://frontend:3000;
    }

    location /api/user {
        proxy_pass http://user_service:8080;
    }

    location /api/auth {
        proxy_pass http://user_service:8080;
    }

    location /api/task {
       proxy_pass http://task_service:8080;
    }
}